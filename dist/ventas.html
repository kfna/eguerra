<!DOCTYPE html>
<html lang="en">
<head>
     <meta charset="UTF-8">
     <title>Estudio Guerra Web Application | by KFNA</title>
     <meta name="description" content="DESCRIPTION">
     <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
     <script defer src="https://use.fontawesome.com/releases/v5.6.3/js/all.js" integrity="sha384-EIHISlAOj4zgYieurP0SdoiBYfGJKkgWedPHH4jCzpCXLmzVsw1ouK59MuUtP4a1" crossorigin="anonymous"></script>
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
     <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.9.1/underscore-min.js"></script>
     <script src="_js/all.js"></script>
    <link rel="stylesheet" href="css/app.css">

 </head>
 <body>
<div id="modal">
  <div class="window"></div>
</div>

 <header>
    <div class="row">
      <div class="col left">
        <ul class="links">
          <li><a href="#" class="collapse"><span class="top"></span><span class="middle"></span><span class="bottom"></span></a></li>
          <li><a href="#" class="reload"><i class="fas fa-redo"></i></a></li>
          <li>|</li>
          <li><a href="#" class="alerts"><i class="far fa-bell"></i><span class="on"></span></a></li>
          <li><input type="text" placeholder="Búsqueda..."/></li>


        </ul>
      </div>
      <div class="col right"></div>
    </div>
  </header>

<main id="app">
  <section class="sidebar">
    <div class="brand">
      <h1>estudio<span>eguerra</h1>
      <div class="utils">
        <a href="#" title="Dashboard"><i class="far fa-chart-bar"></i></a>
        <a href="#" title="Mapa"><i class="fas fa-map-marked-alt"></i></a>
      </div>
    </div>
    <div class="user">
      <div class="avatar"><img src="uploads/avatar.jpg" /><span class="online"></span></div>
      <h2>Luis Cruz</h2><h3>Administrador</h3>
    </div>
    <nav>
      <ul>
        <li><a href="#" class="onClickExpand"><i class="fas fa-cash-register"></i>Ventas <span>&rsaquo;</span></a></li>
        <li class="sub">
          <a href="ventas.html">Ventas</a>
          <a href="ventas-reporte.html">Reporte de Ventas</a>
        </li>
    
        <li><a href="#" class="onClickExpand"><i class="fas fa-users"></i>Clientes <span>&rsaquo;</span></a></li>
        <li class="sub">
          <a href="clientes.html">Clientes</a>
        </li>
        <li><a href="#" class="onClickExpand"><i class="fas fa-doc"></i>Catálogos <span>&rsaquo;</span></a></li>
        <li class="sub">
          <a href="#">Dashboard</a>
          <a href="servicios.html">Paquetes y Servicios</a>
          <a href="proveedores.html">Proveedores</a>
        </li>
        <li><a href="#" class="onClickExpand"><i class="fas fa-comment-dollar"></i>Pagos<span>&rsaquo;</span></a></li>
        <li class="sub">
          <a href="#">Pago a Trabajadores</a>
        </li>
        <li><a href="#" class="onClickExpand"><i class="fas fa-box"></i>Reportes<span>&rsaquo;</span></a></li>
        <li class="sub">
          <a href="#">Reportes Generales</a>
          <a href="#">Video y Secuencia</a>
          <a href="#">Aenda Programada</a>
          <a href="#">Trabajos Pendientes</a>
          <a href="#">Navidad</a>
        </li>
        <li><a href="#" class="onClickExpand"><i class="fas fa-th"></i>Inventarios<span>&rsaquo;</span></a></li>
        <li class="sub">
          <a href="#">Almacenes</a>
          <a href="#">Existencias</a>
        </li>
        <li><a href="#" class="onClickExpand"><i class="fas fa-users-cog"></i>Usuarios<span>&rsaquo;</span></a></li>
        <li class="sub">
          <a href="usuarios.html">Control de Acceso</a>
          <a href="#">Asistencia Personal</a>
        </li>
      </ul>
    </nav>
  </section>

  <section class="panel">
  <section id="ventas" class="page">

  <div class="panel window">



    <div class="tabs">
      <a href="#" class="tref active" data-idx="1">Punto de Venta</a>
    </div>
    <div class="tab t1 active">

      <div class="row">
        <div class="col"></div>
          <div class="col">


            <style>
            .pos { min-height: 250px; margin-bottom: 15px; margin-top: -38px; }
            .pos table { background-color: #fff;}
            .pos .search { margin-bottom: 5px; margin-top: 20px; text-align: right;}
            .pos .search input { max-width: 350px; display: inline-block;}
            </style>
            <div class="pos">

              <div id="servicios" class="search">
              <input type="text" placeholder="Búsqueda..." id="servicios" name="servicios" class="isRequired isAutoComplete search" />
              <div id="lst_servicios" name="lst_servicios" class="select">
                <ul class="list"></ul>
              </div>
              </div>

              <table id="tblOrden" name="tblOrden" cellpadding="0" cellspacing="0" class="bordered">
                <thead>
                <tr>
                  <th>#</th>
                  <th>Cantidad</th>
                  <th>Descripción</th>
                  <th>Fecha Evento</th>
                  <th>Precio</th>
                </tr>
                </thead>
                <tbody></tbody>
                <tfoot>

                </tfoot>
              </table>
            </div>

            <table align="right">
              <tr>
                <td>Total</td>
                <td><span class="total">$0.00</span></td>
              </tr>
              <tr>
                <td>Anticipo</td>
                <td>$0.00</td>
              </tr>
              <tr>
                <td>Saldo</td>
                <td>$0.00</td>
              </tr>
            </table>


          </div>
      </div>

      <form id="frmCliente" name="frmCliente" data-model="cliente">


          <div class="row c2">
            <div class="col">

              <div class="row c2">
                <div class="col">
                  <label>Fecha de Venta</label>
                  <input type="text" placeholder="Fecha de Venta" id="fecha" name="fecha" class="isRequired" disabled />

                </div>
                <div class="col">
                  <label>Anticipo</label>
                  <input type="text" placeholder="$0.00" id="rfid" name="rfid" class="isRequired number" />


                </div>

              </div>



              <div class="row c2">
                <div class="col">
                  <label>Cliente</label>
                  <div id="clientes" class="search" data-src="getClientes">
                  <input type="text" placeholder="Búsqueda..." id="cliente" name="cliente" class="isRequired isAutoComplete search" />
                  <div id="lst_clientes" class="select">
                    <ul class="list"></ul>
                  </div>
                  </div>


                </div>
                <div class="col">
                  <label>Fecha de Evento</label>
                  <input type="text" placeholder="Telefono" id="origen" name="origen" class="isRequired" />

                </div>
              </div>



              <div class="row c2">
                <div class="col">
                  <label>Observaciones Internas</label>
                  <input type="text" placeholder="Búsqueda..." id="rfid" name="rfid" class="isRequired number" />

                </div>
                <div class="col">
                  <label>Observaciones</label>
                  <input type="text" placeholder="Telefono" id="origen" name="origen" class="isRequired" />
                </div>
              </div>



            </div>
            <div class="col">


            </div>

          </div>



          <div class="row actions">
            <div class="col"><a href="javascript:void(0)" data-exec="save" class="btn onClick">Guardar</a></div>
          </div>




      </form>
    </div>
  </div>
</section>
</section>
  </main>

<style>
.search { position: relative; d}
.select { position: absolute; width: 100%; min-height: 150px; background-color: #fff; border: #e4e4e4 solid 1px; box-shadow: 0px 0px 15px rgba(0,0,0,.25); display: none}
.select ul li { padding-left: 15px;}
.select ul li:hover { background-color: #e4e4e4;}
.select ul li a { color: #333; font-weight: bold; padding: 3px; display: block;}
</style>
<script src="//cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js"></script>

<script>


var today = new Date();
var dd = String(today.getDate()).padStart(2, '0');
var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
var yyyy = today.getFullYear();

today = dd + '/' + mm + '/' + yyyy;
$(document).ready(function(){
  $("#fecha").val(today);
  $("input.isAutoComplete").click(function(){ $(this).next().toggle(); })

});
</script>
<script>
var objCliente;
$(document).ready(function(e){
objCliente = new App.Cliente();



objDatagrid.execute(
    { ctrl : "cliente",
      data: { exec : "getClientes" },
      callback: function(r){
        objCliente.data = r.json.data;
        var data = r.json.data;
        var buffer = '';
        for(var i=0;i<data.length;i++){
          buffer += '<li class="nombre"><a id="" href="javascript:void(0)">'+data[i].nombre+'</a></li>';
        }
        $("#clientes .select ul").html(buffer);
          $("#clientes ul li a").click(function(){
            $(".select").fadeOut();
            $("#cliente").val($(this).html());
          })
        var lstClientes = new List('lst_clientes', ['nombre']);
        $('#cliente').on('keyup', function() {
          var searchString = $(this).val();
          lstClientes.search(searchString);
        });
      }
    });
});
</script>


<script>
var cart = [];
App.onReady = function(){
  Page = {
    servicios : null,
    init: function(){
      var _self = this;

      objDAO.execute("servicio",{ exec : "getServicios"},function(e){
        _self.data = e.json.data;
        var buffer ='';
        for(var i=0;i<_self.data.length;i++){
          buffer += '<li class="nombre"><a href="javascript:void(0)" data-idx="'+i+'">'+_self.data[i].servicio+'</a></li>';
        }
        $("#servicios ul.list").html(buffer);
        $("#servicios ul li a").click(function(){
          $("#servicios .select").fadeOut();
          var id = $(this).data("idx");
          cart.push(_self.data[id]);
          render();

        })
        _self.mounted();
      });
    },
    mounted: function(){
      var _self = this;
    }
  }
  Page.init();
};

function render(){
  var buffer = '';
  var total = 0;
  for(i=0;i<cart.length;i++){
    buffer +='<tr><td align="center">1</td><td>1</td><td>'+cart[i].servicio+'</td><td>'+cart[i].costo+'</td><td align="center"><a href="#">eliminar</a></td></tr>';
    total += parseFloat(cart[i].costo);
  }

  $("#tblOrden > tbody").html(buffer);
  $("span.total").html(total);
}
</script>

 </body>
 </html>
