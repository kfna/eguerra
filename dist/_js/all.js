(App=App||{}).Animal=function(){this.data,this.Datagrid,this.ref="animal",this.init()},App.Animal.prototype={init:function(){this.addEventListeners(),DEBUG&&console.log("Animal Module is Ready...")},animations:function(){},addEventListeners:function(t){var e=this;$("section#animal").on("click","a.onClick",function(){switch($(this).data("exec")){case"save":e.save($(this))}})},save:function(t){var e="#"+t.closest("form").attr("id"),i=new App.Forms;if(i.reset(e),i.validate(e)){var n=objDAO.DAO.toObject($(e).serializeArray());objDAO.execute(this.ref,{exec:"save",data:n},function(t){200==t.status?alert("elemento guardado"):($("#notice").addClass("show"),setTimeout(function(){$("#notice").removeClass("show")},5e3))})}},getList:function(t){objDAO.execute(this.ref,{exec:"getList",data:null},function(t){if(200==t.status){for(var e=t.json,i="",n=0;n<e.length;n++)i+="<option>"+e[n].cliente+"</option>";$("#lstClientes").html(i)}else $("#notice").addClass("show"),setTimeout(function(){$("#notice").removeClass("show")},5e3)})}},(App=App||{}).Auth=function(){this.data,this.DAO,this.ref="auth",this.init()},App.Auth.prototype={init:function(){var t=this;t.DAO=new App.DAO,t.addEventListeners(),t.animations()},animations:function(){$("#login form").removeClass("onReady")},addEventListeners:function(t){var e=this;$("#formAuth").on("click","a.onClick",function(){switch($(this).data("exec")){case"auth":e.auth()}})},auth:function(){var t=this,e=new App.Forms;if(e.reset($("#formAuth")),e.validate($("#formAuth"))){var i=t.DAO.toObject($("#formAuth").serializeArray());t.DAO.execute(t.ref,{exec:"auth",data:i},function(t){200==t.status?window.location=t.redirect:($("#notice").addClass("show"),setTimeout(function(){$("#notice").removeClass("show")},5e3))})}}},(App=App||{}).Cliente=function(){this.data,this.DAO,this.Datagrid,this.ref="cliente",this.init()},App.Cliente.prototype={init:function(){this.DAO=new App.DAO,this.addEventListeners()},animations:function(){},addEventListeners:function(t){},save:function(t){var e=this,i="#"+t.closest("form").attr("id"),n=new App.Forms;if(n.reset(i),n.validate(i)){var a=e.DAO.toObject($(i).serializeArray());e.DAO.execute(e.ref,{exec:"save",data:a},function(t){200==t.status?alert("elemento guardado"):($("#notice").addClass("show"),setTimeout(function(){$("#notice").removeClass("show")},5e3))})}},getList:function(t){this.DAO.execute(this.ref,{exec:"getList",data:null},function(t){if(200==t.status){for(var e=t.json,i="",n=0;n<e.length;n++)i+="<option>"+e[n].cliente+"</option>";$("#lstClientes").html(i)}else $("#notice").addClass("show"),setTimeout(function(){$("#notice").removeClass("show")},5e3)})}},(App=App||{}).DAO=function(t){this.data=t,this.init()},App.DAO.prototype={init:function(){console.log("DAO is ready...")},execute:function(t,e,i){$.ajax({type:"POST",url:"_ctrl/ctrl."+t+".php",data:e,dataType:"json",success:function(t){i(t)},error:function(t){console.log(t)}})},toObject:function(t){var i={};return $.each(t,function(t,e){i[e.name]=e.value}),i}},(App=App||{}).Datagrid=function(t,e,i){this.data=t,this.init()},App.Datagrid.prototype={init:function(t){this.addEventListeners(),DEBUG&&console.log("DATAGRID Module is Ready...")},addEventListeners:function(t){var e=this;$(document).on("click",function(){}),$(document).on("click","table a.onClick",function(){switch($(this).data("exec")){case"delete":e.delete(this);break;case"update":e.update(this);break;case"more":e.openActions(this)}})},openActions:function(t){$("table .more ul").hide(),$(t).next().toggle()},delete:function(t){var e=$(t).closest("tr").data("id"),i=$(t).closest("table").data("ctrl");confirm("Confimrar")&&objDAO.execute(i,{exec:"delete",id:e},function(t){console.log(t)})},update:function(t){var e=$(t).closest("tr").data("id");$(t).closest("table").data("ctrl"),_.findWhere(Page.data,{id:e.toString()})},execute:function(e){$.ajax({type:"POST",url:"_ctrl/ctrl."+e.ctrl+".php",data:e.data,dataType:"json",success:function(t){e.callback(t)},error:function(t){console.log(t)}})},toObject:function(t){var i={};return $.each(t,function(t,e){i[e.name]=e.value}),i},renderTable:function(t,e){for(var i=e.find("tbody").html(),n=/\{.*?\}/g,a=[];m=n.exec(i);){var o={column:m[0].replace("{","").replace("}",""),str:m[0]};a.push(o)}for(var s="",c=0;c<t.length;c++){for(var r=i,d=0;d<a.length;d++){var l=t[c][a[d].column];r=r.replace(a[d].str,l)}s+=r}e.find("tbody").html(s),e.find("tbody").fadeIn()}},(App=App||{}).Forms=function(){this.init(),this.el},App.Forms.prototype={init:function(){this.addEventListeners(),DEBUG&&console.log("Forms Module is Ready...")},addEventListeners:function(t){var e=this;$(document).on("click","form a.onClick",function(){switch($(this).data("exec")){case"save":e.save($(this))}})},save:function(t){var e="#"+t.closest("form").attr("id"),i=t.closest("form").data("model");if(this.reset(e),this.validate(e)){var n=objDAO.toObject($(e).serializeArray());objDAO.execute(i,{exec:"save",data:n},function(t){202==t.status?alert("elemento guardado"):($("#notice").addClass("show"),setTimeout(function(){$("#notice").removeClass("show")},5e3))})}},validate:function(t){return!0},reset:function(t){}};var App,DEBUG=!0;$(document).ready(function(t){objUI=new App.UI,objDAO=new App.DAO,objDatagrid=new App.Datagrid,objForms=new App.Forms,App.onReady()}),(App=App||{}).Servicio=function(){this.data,this.DAO,this.ref="servicio",this.init()},App.Servicio.prototype={init:function(){this.DAO=new App.DAO,this.addEventListeners()},animations:function(){},addEventListeners:function(t){var e=this;$("section#servicio").on("click","a.onClick",function(){switch($(this).data("exec")){case"save":e.save($(this));break;case"savePaquete":e.savePaquete($(this))}})},save:function(t){var e="#"+t.closest("form").attr("id"),i=new App.Forms;if(i.reset(e),i.validate(e)){var n=this.DAO.toObject($(e).serializeArray());this.DAO.execute(this.ref,{exec:"save",data:n},function(t){200==t.status?alert("elemento guardado"):($("#notice").addClass("show"),setTimeout(function(){$("#notice").removeClass("show")},5e3))})}},savePaquete:function(t){var a=this,e="#"+t.closest("form").attr("id"),i=new App.Forms;if(i.reset(e),i.validate(e)){var n=a.DAO.toObject($(e).serializeArray(),"text"),o=[];$("#tblSelServicios input[type=checkbox]:checked").each(function(t,e){var i=$(this).data("idx"),n={id:a.data[i].id,servicio:a.data[i].servicio,costo:a.data[i].costo};""!=$("#costo_"+i).val()&&(n.costo=$("#costo_"+i).val()),o.push(n)}),n.servicios=o;a.DAO.execute(a.ref,{exec:"savePaquete",data:n},function(t){200==t.status?alert("elemento guardado"):($("#notice").addClass("show"),setTimeout(function(){$("#notice").removeClass("show")},5e3))})}},setData:function(t){this.data=t},getData:function(){return this.data},datagrid:function(t){_self.DAO.execute(_self.ref,{exec:"save",data:data},function(t){200==t.status?alert("elemento guardado"):($("#notice").addClass("show"),setTimeout(function(){$("#notice").removeClass("show")},5e3))})}},(App=App||{}).UI=function(){this.init()},App.UI.prototype={init:function(){this.addEventListeners(),this.nav(),this.dropdowns(),DEBUG&&console.log("UIX Module is Ready...")},addEventListeners:function(){var t=this;$(document).on("click","a.onClick",function(){switch($(this).data("exec")){case"modal":t.modal(this,null);break;case"modalUpdate":t.modalUpdate(this)}}),$(document).on("keyup",function(t){27==t.keyCode&&$("#modal").is(":visible")&&$("#modal").fadeOut()})},modal:function(t,e){var i=$(t).data("src")+".html";$("#modal .window").hide(),$("#modal .window").load(i,function(){$("#modal").show(),$("#modal .window").fadeIn()})},modalUpdate:function(t){var e=$(t).closest("tr").data("id"),i=$(t).data("src")+".html",n=_.findWhere(Page.data,{id:e.toString()});$("#modal .window").hide(),$("#modal .window").load(i,function(){$("#modal .window form input").each(function(){var t=$(this).attr("id");$(this).val(n[t])}),$("a#btnSave").html("Actualizar"),$("a#btnSave").attr("data-exec","update"),console.log($("a#btnSave")),$("#modal").show(),$("#modal .window").fadeIn()})},nav:function(){$("nav ul li a.onClickExpand").click(function(){$("nav ul li.sub").slideUp(),$(this).parent().next().slideToggle()})},dropdowns:function(){$(".dropdown h5").click(function(){$(this).parent().find(".option").slideToggle()}),$(document).on("click",".dropdown .option ul li",function(){var t={value:$(this).val(),text:$(this).html()};$(this).parents().find(".option").slideUp(),$(this).parents().find("input[type='hidden']").val(t.value),$(this).parents().find("h5").html(t.text)}),$(".dropdown").each(function(){var a={};a.source=$(this).data("source"),a.search=$(this).data("search"),a.exec=$(this).data("exec"),a.el=$(this).find("ul"),objDAO.execute(a.source,{exec:a.exec,data:null},function(t){if(202==t.status){for(var e="",i=t.json.data,n=0;n<i.length;n++)e+='<li value="'+i[n].id+'">'+i[n].label+"</li>";$(a.el).append(e)}})})},autocomplete:function(){$(".dropdown h5").click(function(){$(this).parent().find(".option").slideToggle()}),$(document).on("click",".dropdown .option ul li",function(){var t={value:$(this).val(),text:$(this).html()};$(this).parents().find(".option").slideUp(),$(this).parents().find("input[type='hidden']").val(t.value),$(this).parents().find("h5").html(t.text)}),$("input.isAutocomplete").each(function(){var a={};a.source=$(this).data("source"),a.search=$(this).data("search"),a.exec=$(this).data("exec"),a.el=$(this).find("ul"),objDAO.execute(a.source,{exec:a.exec,data:null},function(t){if(202==t.status){for(var e="",i=t.json.data,n=0;n<i.length;n++)e+='<li value="'+i[n].id+'">'+i[n].label+"</li>";$(a.el).append(e)}})})}};var Nertek=Nertek||{};Nertek.Usuarios=function(t,e,i){this.id,this.nombre,this.alias,this.email,this.collection,this.DAO=new Nertek.DAO,this.init()},Nertek.Usuarios.prototype={init:function(){}};